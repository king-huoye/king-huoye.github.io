<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">åŠ è½½ä¸­...</title>
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVHw8xeLFNz5JTx7kXyPTg9RLcbVk0frxEJjKj7xVqQ6oYg/zBwLhloesBopz" crossorigin="anonymous">

    <style>
        /* æ·»åŠ å­—ä½“åŠ è½½ä¼˜åŒ– */
        @font-face {
            font-family: 'KaTeX_Main';
            font-display: swap; /* ä½¿ç”¨ swap ç­–ç•¥ï¼Œå…ˆæ˜¾ç¤ºå¤‡ç”¨å­—ä½“ */
        }
        
        /* CSSæ ·å¼ä¸ä¸»é¡µå¡ç‰‡é£æ ¼ä¿æŒä¸€è‡´ï¼Œå¹¶æ·»åŠ äº†Markdownæ¸²æŸ“åçš„å…ƒç´ æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease;
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        /* è”ç³»é¡¹ï¼ˆæŒ‰é’®æ ·å¼ï¼‰ï¼Œåœ¨è¿™é‡Œä½œä¸º"è¿”å›åˆ—è¡¨"æŒ‰é’® */
        .contact-item {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .contact-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            min-width: 0;
            max-width: 900px;
            margin: 30px auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: fadeInUp 0.8s ease;
        }

        /* åŠ è½½çŠ¶æ€æ ·å¼ */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Markdownæ¸²æŸ“åçš„å…ƒç´ æ ·å¼ */
        .markdown-body {
            font-size: 1em;
            line-height: 1.8;
            color: #333;
        }

        .markdown-body h1, .markdown-body h2, .markdown-body h3, .markdown-body h4, .markdown-body h5, .markdown-body h6 {
            color: #333;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
            font-weight: 600;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .markdown-body h1 { font-size: 2em; border-bottom: 2px solid #667eea; padding-bottom: 10px;}
        .markdown-body h2 { font-size: 1.6em; border-bottom: 1px solid #764ba2; padding-bottom: 8px;}
        .markdown-body h3 { font-size: 1.3em; }

        .markdown-body p {
            margin-bottom: 1em;
        }

        .markdown-body ul, .markdown-body ol {
            margin-left: 25px;
            margin-bottom: 1em;
        }

        .markdown-body li {
            margin-bottom: 0.5em;
        }

        /* å†…è”ä»£ç æ ·å¼ */
        .markdown-body code {
            background-color: #f0f0f0;
            border-radius: 4px;
            padding: 2px 5px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            color: #e83e8c;
        }

        /* ä»£ç å—æ ·å¼ */
        .markdown-body pre {
            background-color: #282c34;
            border-radius: 8px;
            padding: 15px;
            overflow-x: auto;
            margin-bottom: 1em;
        }
        
        .markdown-body pre code {
            background-color: transparent;
            padding: 0;
            color: #abb2bf;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* å¼•ç”¨å—æ ·å¼ */
        .markdown-body blockquote {
            border-left: 4px solid #667eea;
            background-color: #f8f8f8;
            padding: 10px 15px;
            margin: 1em 0;
            color: #555;
            font-style: italic;
        }

        /* è¡¨æ ¼æ ·å¼ */
        .markdown-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
        }

        .markdown-body th, .markdown-body td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        .markdown-body th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        /* å›¾ç‰‡æ ·å¼ */
        .markdown-body img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1em auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* æ•°å­¦å…¬å¼æ ·å¼ä¼˜åŒ– */
        .katex {
            font-size: 1.1em;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header { padding: 20px; }
            .header h1 { font-size: 2em; }
            .main-content { padding: 20px; }
        }

        /* åŠ¨ç”» */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1 id="article-title">åŠ è½½ä¸­...</h1>
        <p id="article-date"></p>
        <a href="interview-notes.html" class="contact-item">ğŸ”™ è¿”å›ç¬”è®°åˆ—è¡¨</a>
    </div>
</div>

<div class="main-content">
    <div id="markdown-content" class="markdown-body loading">
        æ­£åœ¨åŠ è½½ç¬”è®°å†…å®¹...
    </div>
</div>

<!-- è„šæœ¬åŠ è½½ä¼˜åŒ– -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>

<!-- KaTeX å»¶è¿ŸåŠ è½½ -->
<script>
    // å»¶è¿ŸåŠ è½½ KaTeX
    function loadKaTeX() {
        const katexScript = document.createElement('script');
        katexScript.src = 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js';
        katexScript.integrity = 'sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8';
        katexScript.crossOrigin = 'anonymous';
        
        katexScript.onload = function() {
            const autoRenderScript = document.createElement('script');
            autoRenderScript.src = 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js';
            autoRenderScript.integrity = 'sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05';
            autoRenderScript.crossOrigin = 'anonymous';
            
            autoRenderScript.onload = function() {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                });
            };
            
            document.head.appendChild(autoRenderScript);
        };
        
        document.head.appendChild(katexScript);
    }

    document.addEventListener('DOMContentLoaded', async function() {
        const markdownContentDiv = document.getElementById('markdown-content');
        const pageTitle = document.getElementById('page-title');
        const articleTitle = document.getElementById('article-title');
        const articleDate = document.getElementById('article-date');

        // è·å– URL å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const noteFileName = urlParams.get('note');

        if (!noteFileName) {
            markdownContentDiv.innerHTML = '<p style="color: #d9534f;">âŒ é”™è¯¯ï¼šæœªæŒ‡å®šè¦åŠ è½½çš„ç¬”è®°æ–‡ä»¶ã€‚<br>è¯·æ£€æŸ¥URLæ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ "?note=æ–‡ä»¶å" å‚æ•°ã€‚</p>';
            pageTitle.textContent = 'é”™è¯¯ - éœçƒ¨æ™¯çš„å°ç©ºé—´';
            articleTitle.textContent = 'åŠ è½½å¤±è´¥ï¼šæœªæŒ‡å®šæ–‡ä»¶';
            articleDate.textContent = '';
            return;
        }

        const markdownFilePath = `notes/${noteFileName}.md`;

        try {
            const response = await fetch(markdownFilePath);

            if (!response.ok) {
                let errorText = `åŠ è½½å¤±è´¥ï¼šæ–‡ä»¶ "${markdownFilePath}" ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®ã€‚`;
                if (response.status === 404) {
                    errorText = `åŠ è½½å¤±è´¥ï¼šæ–‡ä»¶ "${markdownFilePath}" æœªæ‰¾åˆ° (404)ã€‚<br>è¯·æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ‹¼å†™æ­£ç¡®ï¼ˆåŒ…æ‹¬å¤§å°å†™ï¼‰ï¼Œå¹¶ç¡®è®¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨äº 'notes/' ç›®å½•ä¸‹ã€‚`;
                } else {
                    errorText = `åŠ è½½å¤±è´¥ï¼šæœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç  ${response.status} - ${response.statusText}`;
                }
                markdownContentDiv.innerHTML = `<p style="color: #d9534f;">âŒ ${errorText}</p>`;
                pageTitle.textContent = `é”™è¯¯ - ${noteFileName} - éœçƒ¨æ™¯çš„å°ç©ºé—´`;
                articleTitle.textContent = 'åŠ è½½å¤±è´¥';
                articleDate.textContent = '';
                return;
            }

            const markdownText = await response.text();

            // é…ç½® marked.js
            marked.setOptions({
                gfm: true,
                breaks: true,
                highlight: function(code, lang) {
                    const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                    return hljs.highlight(code, { language }).value;
                }
            });

            const htmlContent = marked.parse(markdownText);
            markdownContentDiv.innerHTML = htmlContent;

            // æå–æ ‡é¢˜å’Œæ—¥æœŸ
            const lines = markdownText.split('\n');
            let extractedTitle = '';
            let extractedDate = '';
            let foundTitle = false;

            for (let i = 0; i < Math.min(lines.length, 10); i++) {
                const line = lines[i].trim();

                const titleMatch = line.match(/^#\s+(.*)/);
                if (titleMatch && titleMatch[1] && !foundTitle) {
                    extractedTitle = titleMatch[1].trim();
                    foundTitle = true;
                }
                
                const dateMatch = line.match(/(?:Date|Published|æ—¥æœŸ):\s*(.*)/i);
                if (dateMatch && dateMatch[1]) {
                    extractedDate = dateMatch[1].trim();
                }

                if (foundTitle && extractedDate) {
                    break;
                }
            }

            if (!foundTitle) {
                extractedTitle = noteFileName.replace(/-/g, ' ').split('.').slice(0, -1).join(' ').replace(/\b\w/g, l => l.toUpperCase());
            }

            pageTitle.textContent = `${extractedTitle} - éœçƒ¨æ™¯çš„å°ç©ºé—´`;
            articleTitle.textContent = extractedTitle;
            articleDate.textContent = extractedDate ? `ğŸ“… ${extractedDate}` : '';

            // æ£€æŸ¥æ˜¯å¦æœ‰æ•°å­¦å…¬å¼ï¼Œå¦‚æœæœ‰æ‰åŠ è½½ KaTeX
            if (markdownText.includes('$') || markdownText.includes('\\(') || markdownText.includes('\\[')) {
                loadKaTeX();
            }

        } catch (error) {
            console.error("åŠ è½½æˆ–è§£æMarkdownæ–‡ä»¶å¤±è´¥:", error);
            markdownContentDiv.innerHTML = `<p style="color: #d9534f;">âŒ åŠ è½½ç¬”è®°å¤±è´¥ã€‚å¯èƒ½åŸå› ï¼šæ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®ï¼Œæˆ–è€…ä½ æ­£åœ¨é€šè¿‡ "file://" åè®®ç›´æ¥æ‰“å¼€æ–‡ä»¶å¯¼è‡´æµè§ˆå™¨å®‰å…¨é™åˆ¶ã€‚<br>å¼ºçƒˆå»ºè®®ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆå¦‚ VS Code çš„ Live Server æ’ä»¶ï¼‰æ¥è¿è¡Œä½ çš„ç½‘é¡µã€‚</p><p style="color: #d9534f;">è¯¦ç»†é”™è¯¯ä¿¡æ¯: ${error.message}</p>`;
            pageTitle.textContent = 'é”™è¯¯ - éœçƒ¨æ™¯çš„å°ç©ºé—´';
            articleTitle.textContent = 'åŠ è½½å¤±è´¥';
            articleDate.textContent = '';
        }
    });
</script>
</body>
</html>
